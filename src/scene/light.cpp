#include "light.h"
#include "collision.h"
#include "renderer.h"
#include "light_mtl.h"


//=====================================================================================================================================
// Init                                                                                                                               =
//=====================================================================================================================================
void light_t::Init( const char* filename )
{
	light_mtl = rsrc::light_mtls.Load( filename );
}


//=====================================================================================================================================
// Deinit                                                                                                                             =
//=====================================================================================================================================
void light_t::Deinit()
{
	rsrc::light_mtls.Unload( light_mtl );
}


//=====================================================================================================================================
// RenderSphere                                                                                                                       =
//=====================================================================================================================================
static void RenderSphere( const mat4_t& tsl, const vec3_t& col )
{
	glPushMatrix();
	r::MultMatrix( tsl );

	r::Color3( col );
	r::dbg::RenderSphere( 1.0/8.0, 8 );

	glPopMatrix();
}


//=====================================================================================================================================
// Render                                                                                                                             =
//=====================================================================================================================================
void point_light_t::Render()
{
	RenderSphere( transformation_wspace, light_mtl->GetDiffuseColor() );
}


//=====================================================================================================================================
// Render                                                                                                                             =
//=====================================================================================================================================
void spot_light_t::Render()
{
	RenderSphere( transformation_wspace, light_mtl->GetDiffuseColor() );
}
